<div class="pos-container">
    <app-product-list></app-product-list>
    <div class="sidebar">
        <div class="order-management">
            <button (click)="addOrder()">New Order</button>
            @for (order of orders(); track order.id; let i = $index) {
                <button (click)="switchOrder(i)">Order {{ i + 1 }}</button>
                <button (click)="closeOrder(i)">Close Order {{ i + 1 }}</button>
            }
        </div>
        @if (selectedCustomer(); as customer) {
            <div>
                <h3>Selected Customer:</h3>
                <p>{{ customer.name }}</p>
            </div>
        } @else {
            <app-customer-form (customerSelected)="onCustomerSelected($event)"></app-customer-form>
        }
        <app-shopping-cart></app-shopping-cart>
        <button class="pay-button" (click)="onPay()" [disabled]="cartItems().length === 0">Pay</button>
    </div>
</div>

@if (isVariantModalOpen()) {
    <app-variant-modal 
        [product]="selectedProductForVariant()"
        (closeModal)="onCloseVariantModal()"
        (variantSelected)="onVariantSelected($event)">
    </app-variant-modal>
}

@if (isPaymentModalOpen()) {
    <app-payment-modal 
        [order]="currentOrder()!"
        [(isModalOpen)]="isPaymentModalOpen">    
    </app-payment-modal>
}